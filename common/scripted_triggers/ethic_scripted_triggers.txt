### region CIVIC CHECK
# 没有统治者的社会
is_not_rulers_society = {
	OR = {
		has_valid_civic = civic_anarchism
		is_community_society = yes
	}
}

# 是共产主义社会
is_community_society = {
	custom_tooltip = is_community_society
	OR = {
		has_valid_civic = civic_transcendental_communism
		is_community_country = yes
	}
}

# 自己努力达到共产主义的社会
is_community_country = {
	OR = {
		AND = {
			has_valid_civic = civic_shared_burden
			has_tradition = tr_future_society
			has_technology = tech_ascension_theory
		}
		AND = {
			has_valid_civic = civic_anarchism
			has_ethic = ethic_fanatic_socialism
			has_ascension_perk = ap_anarchy_utopia
		}
	}
}

# 是科学社会主义
is_scientific_socialism = {
	OR = {
		has_valid_civic = civic_shared_burden
		has_valid_civic = civic_socialistic
	}
}

# 是未变质的科学社会主义（完成革命传统后可以使用银河革命战争理由）
is_true_scientific_socialism = {
	OR = {
		has_valid_civic = civic_shared_burden
		has_valid_civic = civic_socialistic
	}
	NOR = {
		# has_ethic = ethic_authoritarian
		# has_ethic = ethic_fanatic_authoritarian
		# has_ethic = ethic_xenophobe
		# has_ethic = ethic_fanatic_xenophobe
		# has_ethic = ethic_fanatic_pacifist
		has_country_flag = not_revolution
		has_policy_flag = reform_and_opening_up
	}
}

# 有经济计划效果
is_planned_type = {
	OR = {
		has_policy_flag = economic_stance_planned
		has_policy_flag = economic_controlled_economy
	}
}

# 有市场经济机制
is_market_type = {
	OR = {
		has_policy_flag = economic_stance_market
		has_policy_flag = economic_stance_mixed
		has_policy_flag = economic_controlled_economy
	}
}

# 是计划经济
is_economic_stance_planned = {
	has_policy_flag = economic_stance_planned
	OR = {
		has_ethic = ethic_fanatic_socialism
		has_valid_civic = civic_peoples_republic
		has_valid_civic = civic_glorious_pioneer
		has_active_tradition = tr_future_economy
	}
}

# 是统制经济
is_economic_controlled_economy = {
	OR = {
		AND = {
			has_policy_flag = economic_stance_planned
			NOR = {
				has_ethic = ethic_fanatic_socialism
				has_valid_civic = civic_peoples_republic
				has_valid_civic = civic_glorious_pioneer
				has_active_tradition = tr_future_economy
			}
		}
		has_policy_flag = economic_controlled_economy
	}
}

# 是剥削者
is_exploiter = {
	OR = {
		has_ethic = ethic_capitalism
		has_ethic = ethic_fanatic_capitalism
		has_ethic = ethic_authoritarian
		has_ethic = ethic_fanatic_authoritarian
		has_ethic = ethic_fanatic_xenophobe
		has_authority = auth_imperial
		has_civic = civic_machine_financial_investment
	}
}

# 是修正主义
is_revisionism = {
	OR = {
		AND = {
			OR = {
				has_ethic = ethic_socialism
				has_ethic = ethic_fanatic_socialism
			}
			OR = {
				has_ethic = ethic_authoritarian
				has_ethic = ethic_fanatic_authoritarian
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		has_civic = civic_characteristic_socialism
		has_civic = civic_characteristic_socialism_pioneer
		has_country_flag = not_revolution
		has_policy_flag = reform_and_opening_up
	}
}

# 拥有道德主义主题理念
has_pacifist_topic_civic = {
	OR = {
		has_valid_civic = civic_executive_committee
		has_valid_civic = civic_peaceful_republic
	}
}

# 是罪企
is_criminal_syndicate = {
	OR = {
		#_|巨企国家|	+ETCPM/hiveDLC/MCA/wsg/ev/多彩/Ecar
		AND = {
			OR = {
				has_authority = auth_corporate

				has_civic = civic_galactic_sovereign_megacorp
				# ETCPM
				has_authority = auth_private
				# hiveDLC
				has_valid_civic = civic_mutualistic_behavior
				has_valid_civic = civic_machine_trading
				# MCA
				has_authority = auth_corporate_fiefdom
				has_authority = auth_cooperative
				# wsg
				has_authority = auth_warshipgirls
				# 多彩
				has_authority = auth_brothel
				# Ecar
				has_civic = civic_family_business
				has_civic = civic_world_cooperative
			}
			OR = {
				has_valid_civic = civic_criminal_heritage

				has_valid_civic = civic_ev_criminal_ship	# ev
				has_valid_civic = civic_semen_pantyhose_brothel		# 多彩
			}
		}
		# Ecar
		has_valid_civic = civic_underworld_society
		# azlr
		AND = {
			exists = event_target:elizabeth_leader
			has_country_flag = azur_lane_leader_elizabeth
		}
	}
}
### endregion

### region JOB CHECK
# 未被奴役（兼容特殊国策）
ethic_is_not_enslaved = {
	hidden_trigger = { exists = owner }
	OR = {
		is_enslaved = no
		owner = { has_valid_civic = civic_du_contrat_social }
	}
}

ethic_sparta_job_check_trigger = {
	exists = owner
	owner = { has_valid_civic = civic_sparta_spirit }
	is_enslaved = no
	has_citizenship_type = { country = owner type = citizenship_full }
}

# 可以担任艺人职业（兼容特殊国策）
ethic_entertainer_job_check_trigger = {
	custom_tooltip = SPECIALIST_JOB_TRIGGER
	hidden_trigger = {
		exists = owner
		OR = {
			entertainer_job_check_trigger = yes
			owner = { has_valid_civic = civic_du_contrat_social }
			owner = { has_valid_civic = civic_triple_the_profit }
			owner = { has_valid_civic = civic_sparta_spirit }
		}
		ethic_sparta_job_check_trigger = no
	}
}

# 可以担任战斗职业（兼容特殊国策）
ethic_battle_thrall_job_check_trigger = {
	hidden_trigger = { exists = owner }
	OR = {
		battle_thrall_job_check_trigger = yes
		owner = { has_valid_civic = civic_du_contrat_social }
	}
}

is_crisis_purged_ruler_check = {
	exists = planet
	exists = planet.controller
	planet.controller = {
		OR = {
			is_country_type = swarm
			is_country_type = ai_empire
		}
	}
	OR = {
		# contingency won't purge itself
		NOT = { exists = event_target:custodian_bot }
		AND = {
			exists = event_target:custodian_bot
			NOT = { species = { is_same_value = event_target:custodian_bot } }
		}
	}
}

is_crisis_purged_precursor_check = {
	exists = planet
	exists = planet.controller
	planet.controller = {
		OR = {
			is_country_type = swarm
			is_country_type = ai_empire
		}
	}
}

### endregion
#没有升级的消费品建筑
not_has_building_factory = {
	NOR = {
		has_building = building_factory_2
		has_building = building_factory_3
	}
}

#没有升级的合金建筑
not_has_building_foundry = {
	NOR = {
		has_building = building_foundry_2
		has_building = building_foundry_3
	}
}

#可以建造官僚办公楼
allow_bureaucratic_building = { # NOT corporate & regular empire
	owner = { is_regular_empire = yes }
	NOT = {	has_modifier = slave_colony	}
	OR = {
		owner = {
			OR = {
				has_policy_flag = full_decentralization
				has_policy_flag = high_decentralization
			}
		}
		AND = {
			owner = {
				OR = {
					has_policy_flag = partial_decentralization
					has_policy_flag = concentration_of_power
				}
			}
			planet = {
				OR = {
					is_capital = yes
					is_sector_capital = yes
				}
			}
		}
		AND = {
			owner = {
				OR = {
					has_policy_flag = centralized_state
					has_policy_flag = excessive_centralization
				}
			}
			planet = { is_capital = yes }
		}
	}
}

#ECI意义上的巨企（兼容其他MOD）
is_eci_megacorp = {
	owner = {
		OR = {
			has_authority = auth_corporate
			has_civic = civic_galactic_sovereign_megacorp
			has_civic = civic_family_business
			has_civic = civic_world_cooperative
		}
	}
}

#非官僚行政国家
is_adminless_country = {
	owner = {
		OR = {
			has_valid_civic = civic_OGAS
			has_valid_civic = civic_cybercap
			has_valid_civic = civic_corporate_cybercap
			has_valid_civic = civic_anarchism
			has_valid_civic = civic_barbaric_despoilers
			is_community_society = yes
		}
	}
}

#民主廉政国家
is_clean_government_country = {
	owner = {
		OR = {
			has_valid_civic = civic_democracy_and_clean_government
			has_valid_civic = civic_business_reporting_administration
		}
	}
}

#婚姻市场
is_marriage_market_country = {
	exists = owner
	owner = {
		OR = {
			has_valid_civic = civic_marriage_market
			has_valid_civic = civic_marriage_market_corporate
		}
	}
}

#房产市场
is_real_estate_market_country = {
	exists = owner
	owner = {
		OR = {
			has_valid_civic = civic_real_estate_market
			has_valid_civic = civic_real_estate_market_corporate
		}
	}
}

#耕战一体
is_army_production_country = {
	exists = owner
	owner = {
		OR = {
			has_valid_civic = civic_army_production
			has_valid_civic = civic_army_production_corporate
		}
	}
}