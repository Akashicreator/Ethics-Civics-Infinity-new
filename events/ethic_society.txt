namespace=ethic_society

country_event = { # 社会状态更新（国家月检）
    id = ethic_society.0
    is_triggered_only = yes
    hide_window = yes
    immediate = {
		export_trigger_value_to_variable = {
			trigger = count_owned_ship
			parameters = {
				limit = {
					OR = {
						is_ship_size = science
						is_ship_size = explorer_vessel
						is_ship_size = alien_racing_ship
						is_ship_size = ghost_ship
						is_ship_size = enigmatic_cache
						is_ship_size = azaryn_dome
					}
				}
			}
			variable = num_owned_science_ship
		}
		every_owned_planet = {
			if = {
				limit = {
					AND = {
						is_colony = yes
						is_under_colonization = no
					}
				}
				planet_event = { id = ethic_society.1 }
			}
		}
    }
}

planet_event = { # 社会状态更新（星球月检与触发）
	id = ethic_society.1
    is_triggered_only = yes
    hide_window = yes
    immediate = {
		
		if = {
			limit = { NOT = { has_deposit = d_ethic_society } }
			add_deposit = d_ethic_society
		}

    }
}

country_event = { # 解除动员状态
	id = ethic_society.2
	is_triggered_only = yes
	hide_window = yes
	trigger = {
		is_at_war = no
		has_crisis = no
		any_owned_planet = {
			has_modifier = modifier_mobilization
		}
	}
	immediate = {
		every_owned_planet = {
			remove_modifier = modifier_mobilization
		}
		every_owned_army = {
			limit = {
				OR = {
					army_type = conscript_army
					army_type = robotic_conscript_army
					army_type = robotic_conscript_army_2
					army_type = robotic_conscript_army_3
					army_type = psionic_conscript_army
					army_type = clone_conscript_army
					army_type = undead_conscript_army
					army_type = slave_conscript_army
					army_type = thrall_conscript_army
				}
			}
			leader = {
				unassign_leader = this
			}
			remove_army = yes
		}
	}
}