namespace=ethic_society

country_event = { # 社会状态更新（国家月检）
    id = ethic_society.0
    is_triggered_only = yes
    hide_window = yes
    immediate = {
		every_owned_planet = {
			if = {
				limit = {
					AND = {
						is_colony = yes
						is_under_colonization = no
					}
				}
				planet_event = { id = ethic_society.1 }
			}
		}
    }
}

planet_event = { # 社会状态更新（星球月检与触发）
	id = ethic_society.1
    is_triggered_only = yes
    hide_window = yes
    immediate = {
	
		set_variable = { which = society_num_pops value = value:society_num_pops }
		set_variable = { which = society_factor_pops value = value:society_factor_pops }
		
		set_variable = { which = society_stability_original value = value:society_stability_original }
		set_variable = { which = society_stability_target value = value:society_stability_target }
		set_variable = { which = society_stability_sub value = value:society_stability_sub }
		
		set_variable = { which = society_crime_factor value = value:society_crime_factor }
		set_variable = { which = society_crime_rate_changer value = value:society_crime_rate_changer }
		set_variable = { which = society_crime_rate value = value:society_crime_rate }
		set_variable = { which = society_crime_rate_sub value = value:society_crime_rate_sub }
		
		set_variable = { which = society_amenities_original value = value:society_amenities_original }
		set_variable = { which = society_amenities_target value = value:society_amenities_target }
		set_variable = { which = society_amenities_sub value = value:society_amenities_sub }
		
		set_variable = { which = society_trade_value_original value = value:society_trade_value_original }
		set_variable = { which = society_trade_value_target value = value:society_trade_value_target }
		set_variable = { which = society_trade_value_sub value = value:society_trade_value_sub }
		
		if = {
			limit = { NOT = { has_deposit = d_ethic_society } }
			add_deposit = d_ethic_society
		}
    }
}

planet_event = { # 社会状态DEBUG
	id = ethic_society.9
    is_triggered_only = yes
	desc = ethic_society.9.desc
}